# ============================================================================
# Package Audit Dashboard - Backend Environment Configuration
# ============================================================================
# Copy this file to .env and customize as needed
# For detailed documentation, see: docs/ENV_SETUP.md

# ============================================================================
# API Configuration
# ============================================================================

# API_HOST: Host address for the API server
# - 0.0.0.0: Allow external connections (recommended for Docker/production)
# - 127.0.0.1: Local connections only (more secure for dev)
# Default: 0.0.0.0
API_HOST=0.0.0.0

# API_PORT: Port number for the API server
# - Must be available (not in use by another service)
# - Common alternatives: 8001, 8080, 3000
# Default: 8000
API_PORT=8000

# API_RELOAD: Enable auto-reload on code changes
# - true: Automatically restart server when code changes (development)
# - false: No auto-reload (production - better performance)
# Default: true (development)
API_RELOAD=true

# ============================================================================
# CORS (Cross-Origin Resource Sharing)
# ============================================================================

# CORS_ORIGINS: Allowed origins for CORS requests
# - Single origin: http://localhost:5173
# - Multiple origins: http://localhost:5173,https://yourdomain.com
# - All origins: * (NOT recommended for production)
# Default: http://localhost:5173
CORS_ORIGINS=http://localhost:5173

# ============================================================================
# Storage Configuration
# ============================================================================

# DATA_DIR: Directory where snapshots and data are stored
# - Supports ~ expansion (will resolve to home directory)
# - Relative paths: ./data, ../storage
# - Absolute paths: /var/lib/package-audit
# - Must be writable by the API user
# Default: ~/.package-audit
DATA_DIR=~/.package-audit

# SNAPSHOT_RETENTION: Maximum number of snapshots to keep per manager
# - Older snapshots are automatically deleted when limit is exceeded
# - Higher values = more rollback history but more disk space
# - Set to 0 for unlimited (not recommended)
# Default: 10
SNAPSHOT_RETENTION=10

# ============================================================================
# Security & Timeouts
# ============================================================================

# LOCK_TIMEOUT: Maximum time (seconds) to wait for acquiring a lock
# - Prevents deadlocks when multiple operations try to run simultaneously
# - Increase for slow systems or heavy operations
# - Too low: Operations may fail unnecessarily
# - Too high: System may appear frozen
# Default: 30 seconds
LOCK_TIMEOUT=30

# STALE_LOCK_TIMEOUT: Time (seconds) before considering a lock stale
# - Prevents permanently stuck locks from crashes/errors
# - Should be significantly higher than LOCK_TIMEOUT
# - Automatic cleanup of abandoned locks
# Default: 300 seconds (5 minutes)
STALE_LOCK_TIMEOUT=300

# COMMAND_TIMEOUT: Maximum time (seconds) for executing package manager commands
# - Prevents hanging operations
# - Increase for large projects or slow networks
# - npm install, pip install can take longer than uninstall
# Default: 60 seconds
COMMAND_TIMEOUT=60

# ============================================================================
# Logging
# ============================================================================

# LOG_LEVEL: Logging verbosity level
# - DEBUG: Verbose output, all operations (development)
# - INFO: Normal operations, recommended for most cases
# - WARNING: Only warnings and errors
# - ERROR: Only errors and critical issues
# - CRITICAL: Only critical failures
# Default: INFO
LOG_LEVEL=INFO

# ============================================================================
# Development & Testing
# ============================================================================

# DEBUG: Enable debug mode with detailed error messages
# - true: Show full stack traces and detailed errors
# - false: Production-safe error messages
# ⚠️ WARNING: Never set to true in production (exposes sensitive info)
# Default: false
DEBUG=false

# MOCK_ADAPTERS: Use mock adapters instead of real package managers
# - true: Use simulated package managers (for testing)
# - false: Use real package managers (normal operation)
# Useful for: Testing without installing packages, CI/CD environments
# Default: false
MOCK_ADAPTERS=false

# ============================================================================
# Quick Configuration Profiles
# ============================================================================
#
# DEVELOPMENT (default - this file):
# - API_RELOAD=true, LOG_LEVEL=INFO, DEBUG=false
#
# PRODUCTION:
# - API_RELOAD=false, LOG_LEVEL=WARNING, DEBUG=false
# - CORS_ORIGINS=https://yourdomain.com
# - LOCK_TIMEOUT=60, COMMAND_TIMEOUT=120
#
# TESTING:
# - API_PORT=8001, LOG_LEVEL=DEBUG, DEBUG=true
# - MOCK_ADAPTERS=true, CORS_ORIGINS=*
#
# ============================================================================
# Environment-Specific Examples
# ============================================================================
#
# Docker/Container:
# - API_HOST=0.0.0.0 (required for external access)
# - DATA_DIR=/app/data (use mounted volume)
#
# CI/CD Pipeline:
# - MOCK_ADAPTERS=true (no real package managers)
# - LOG_LEVEL=DEBUG (detailed logs)
# - COMMAND_TIMEOUT=120 (slower in CI)
#
# Reverse Proxy (nginx/traefik):
# - API_HOST=127.0.0.1 (proxy handles external access)
# - CORS_ORIGINS=https://yourdomain.com
#
# ============================================================================
